<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="utf-8" />
	<title>terminal.js test</title>
	<script src="terminal/terminal.js"></script>


	<!-- http://erikosterberg.com/terminaljs/  -->
</head>

<body>
	<h1>terminal.js test</h1>

	<button onclick="t1.beep()">Play the beep!</button>
	<br>
	<br>
<!-- To do:


	- Input in the same line, not in a new line.
	- Title of messages, change spaces for _ 
	- Find a way to add a new empty line, to separate outputs.
	- You can only copy at the end. What if it appears an option to export output to clipboard or create a document? Easy copy to clipboard https://www.w3schools.com/howto/howto_js_copy_clipboard.asp 
	- Format terminal to make it adaptable to mobile phones. Maybe it's better if I do it when I have website.

	- Add SCROLLING OPTIONS TO THE TERMINAL!!
-->
	<script>
		var t1 = new Terminal()
		//t1.setHeight("200px")
		//t1.setWidth('600px')
		t1.setHeight("600px")
		t1.setWidth('1500px')
		document.body.appendChild(t1.html)
		//var t2 = new Terminal()
		//t2.setHeight("250px")
		//t2.setWidth('650px')
		//t2.setBackgroundColor('blue')
		//t2.blinkingCursor(false)
		//document.body.appendChild(t2.html)


		//Initialize variables
		var written_message, input_title, binary_message, sortida2, entrada, addto_bin_message;
		var adenine = 0, thymine = 0,cytosine = 0,guanine = 0;
		//set this variables as empty strings to fill them with the += operator (append) instead of =
		var binary_message = "";
		var dna_message = "";

		t1.print('Hello!');
		t1.print('I convert written messages to a ready to synthesize DNA chain.')
		t1.input("Enter your message here:", function (written_message) {
			t1.input("What's the title of your message? (optional)", function (input_title) {
				//t1.print(message + title)
				t1.print(" ") //i guess empty divs dont remain there and are removed in some kind of way
				t1.print(">" + input_title + "_ASCII")
				t1.print(written_message)
				t1.print(" ")

			//Converting to binary
				
				for (i = 0; i < written_message.length; i++) {
					
					addto_bin_message = written_message[i].charCodeAt(0).toString(2);
					if (addto_bin_message.length == 7) {
						addto_bin_message = "0" + addto_bin_message; //append a 0 if it's not a special character to have 8 bits instead of 7
					}

					console.log(written_message[i],"converted to", addto_bin_message)

					binary_message += addto_bin_message;
					
					console.log("total message: ", binary_message)
					//binary_message += written_message.charCodeAt(i).toString(2) + " "; Does the same but iteration with charcodeat instead of written_message[]
					// Si es asci simple (a-z,1-10) fica 7 lletres i no 8 (asci complex, llatí amb accents), jo vull que fiqui sempre 8 lletres!
				};

				if (binary_message.length != 8 * written_message.length){
					console.log("Error converting to binary! Used strange charcters?")
				} else {
					console.log("Good conversion to binary!")
				}

				t1.print(">" + input_title + "_bin")

				t1.print(binary_message)

			//Converting to DNA
				
				for (i = 0; i < binary_message.length; i++) {
					random_number = Math.round(Math.random());
					console.log("random number is " + random_number)
					if (binary_message[i] == 1){
						if (random_number == 1){
							dna_message += "t"
							++thymine
						} else {
							dna_message += "g"
							++guanine
						}
					} else {
						if (random_number == 1){
							dna_message += "a"
							++adenine
						} else {
							dna_message += "c"
							++cytosine
						}
					}
					console.log(dna_message)
				};

				
				t1.print(">" + input_title + "_DNA")

				t1.print(dna_message)

				console.log("A=",adenine)
				console.log("T=",thymine)
				console.log("C=",cytosine)
				console.log("G=",guanine)
				gc_content = (guanine + cytosine) *100 / (adenine + thymine + cytosine + guanine);
				t1.print("GC content = " + (gc_content.toFixed(2)) + "%")
				
				//for (i = 0; i < entrada.length; i++) {
				//	sortida += entrada[i].charCodeAt(0).toString(2) + " ";
				//	sortida2 += entrada.charCodeAt(i).toString(2) + " ";
					// Si es asci simple (a-z,1-10) fica 7 lletres i no 8 (asci complex, llatí amb accents), jo vull que fiqui sempre 8 lletres!
				//};
				//console.log(sortida);
				//console.log(sortida2);
				//t1.print(sortida)
				t1.input('Whats your name?', function (input) {
					t1.print('Welcome, ' + input)
					var entradabona = input;
					var sortidabona = "";
					var sortidabona2 = "";
					for (i = 0; i < entrada.length; i++) {
						sortidabona += entradabona[i].charCodeAt(0).toString(2) + " ";
						if (i == 0) {
							//primera vegada crea el nou div on ficar el contingut. Puc modificar la funció per passarli el nom del div per aqui i a echon tambe, i aixi reutilitzarla per diferents quadres de text que vull que es vagin omplint progressivament
							t1.printNew(sortidabona[i]);
							console.log("afegit")
						} else {
							//afegeix contingut a tal div. modificar-lo per afegir al mateix div diferent contingut
							t1.echon(sortidabona)
							console.log("afegit2")
						};
						//t1.echon(sortidabona);
						sortidabona2 += entradabona.charCodeAt(i).toString(2) + " ";
					};
					console.log(sortidabona);
					t1.print(sortidabona);
				})
			})
		})

	</script>


	<!--script>
				t2.sleep(1000, function () {
					t2.print('Hello again!')
					t2.input('Whats your name again?', function (input) {
						t2.print('Welcome again, ' + input)
					})
				})
			})
			var t3 = new Terminal('terminal_3')
			t3.setHeight("180px")
			t3.setWidth('550px')
			t3.setBackgroundColor('green')
			document.body.appendChild(t3.html)
			t3.password('Enter password:', function (password) {
				t3.print('Your password is: ' + password)
			})
			var paragraph = document.createElement("p")
			var t3bySelector = document.querySelector("#terminal_3")
			paragraph.innerHTML = t3bySelector && t3bySelector.id ? 'The 3rd terminal has id: ' + t3bySelector.id : 'Assigning an id at initialization doesnt semm to work!'
			document.body.appendChild(paragraph)
			var t4 = new Terminal('terminal_3')
			t4.setHeight("180px")
			t4.setWidth('550px')
			t4.setBackgroundColor('green')
			document.body.appendChild(t4.html)
			t4.confirm('Are you sure?', function (didConfirm) {
				t4.print(didConfirm ? 'OK' : 'Why not?')
			})
		</script-->

</body>

</html>